<!--Automatically bind the challenge to a button-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Client Side</title>
  <script src="https://www.google.com/recaptcha/api.js"></script>
</head>
<body>
<h1>Client Side</h1>
<form id="demo-form">
  <input id="inp" type="email" value="xxx@gmail.com" />
  <button class="g-recaptcha"
          data-sitekey="6LfF304qAAAAAI3fJAmAvFapKIan4VpfXcSuYAnL"
          data-callback='onSubmit'
          data-action='submit'>Submit
  </button>
</form>
<script>

  function onSubmit(token) {

    const inp = document.getElementById('inp')

    fetch('http://localhost:3000/password_recovery', {
        headers: {
          'Content-Type': 'application/Json'
        },
        method:
          'POST',
        body:
          JSON.stringify({
            email: inp.value,
            recaptchaToken: token
          })

      }
    )
  }


</script>

<script>
  const btn = document.getElementsByTagName('button')[0]
</script>

</body>
</html>